<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Template Transaction</title>
    <script>
        function addEntryRow() {
            const table = document.getElementById("entryTableBody");
            const rowCount = table.rows.length;

            const row = document.createElement("tr");
            row.innerHTML = `
                <td><input type="text" name="entry[${rowCount}].name" /></td>
                <td><input type="text" name="entry[${rowCount}].comment" /></td>
                <td><input type="text" name="entry[${rowCount}].debit" /></td>
                <td><input type="text" name="entry[${rowCount}].credit"  /></td>
                <td><button type="button" onclick="removeRow(this)">üóëÔ∏è</button></td>
            `;
            table.appendChild(row);
        }

        function removeRow(button) {
            const row = button.closest("tr");
            row.remove();
        }
    </script>
</head>
<body>
<h2>–ù–æ–≤–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—è</h2>

<form th:action="@{/acc/templatetransactionsave}" method="post" th:object="${transaction}">
    <label>–ù–∞–∑–≤–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó: </label>
    <input type="text" th:field="*{name}" />
    <br/>

    <table>
        <thead>
        <tr>
            <th>–ù–∞–∑–≤–∞</th>
            <th>–ö–æ–º–µ–Ω—Ç–∞—Ä</th>
            <th>–î–µ–±–µ—Ç</th>
            <th>–ö—Ä–µ–¥–∏—Ç</th>
            <th>–î—ñ—è</th>
        </tr>
        </thead>
        <tbody id="entryTableBody">
        <tr th:each="entry, iterStat : *{entry}">
            <td><input type="text" th:field="*{entry[__${iterStat.index}__].name}" /></td>
            <td><input type="text" th:field="*{entry[__${iterStat.index}__].comment}" /></td>
            <td><input type="text" th:field="*{entry[__${iterStat.index}__].debit}"  /></td>
            <td><input type="text" th:field="*{entry[__${iterStat.index}__].credit}"  /></td>
            <td><button type="button" onclick="removeRow(this)">üóëÔ∏è</button></td>
        </tr>
        </tbody>
    </table>
    <br/>
    <button type="button" onclick="addEntryRow()">‚ûï –î–æ–¥–∞—Ç–∏ —Ä—è–¥–æ–∫</button>
    <br/><br/>
    <button type="submit">üíæ –ó–±–µ—Ä–µ–≥—Ç–∏</button>
</form>
</body>
</html>
