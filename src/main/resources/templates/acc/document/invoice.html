<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="uk">
<head>
    <meta charset="UTF-8">
    <title>Рахунок-фактура</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .invoice-box {
            max-width: 900px;
            margin: auto;
            padding: 40px;
            border: 1px solid #dee2e6;
            background-color: #fff;
        }
        .invoice-header {
            margin-bottom: 30px;
        }
        .table-sm th, .table-sm td {
            padding: 0.3rem;
        }
        .table td, .table th {
            vertical-align: middle;
            text-align: center;
        }
        .text-end {
            text-align: right !important;
        }
    </style>
</head>
<body>

<div class="invoice-box shadow">
    <div class="row invoice-header">
        <div class="col-6">
            <h4>Рахунок-фактура</h4>
            <p><strong>Номер:</strong> <span th:text="${invoiceNumber}">INV-001</span></p>
            <p><strong>Дата:</strong> <span th:text="${#dates.format(invoiceDate, 'dd.MM.yyyy')}">19.04.2025</span></p>
        </div>
        <div class="col-6 text-end">
            <p><strong>Постачальник:</strong><br>ТОВ "Моя Компанія"<br>м. Київ, вул. Х</p>
            <p><strong>Покупець:</strong><br><span th:text="${clientName}">ТОВ "Клієнт"</span></p>
        </div>
    </div>

    <table class="table table-bordered table-sm">
        <thead class="table-light">
        <tr>
            <th>#</th>
            <th>Назва товару / послуги</th>
            <th>Од. виміру</th>
            <th>Кількість</th>
            <th>Ціна</th>
            <th>Сума</th>
            <th>Коментар</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="item, stat : ${goodsList}">
            <td th:text="${stat.index + 1}">1</td>
            <td th:text="${item.name}">Товар</td>
            <td th:text="${item.measurement.name}">шт</td>
            <td th:text="${item.quantity}">2</td>
            <td th:text="${#numbers.formatDecimal(item.price, 1, 'COMMA', 2, 'POINT')}">100.00</td>
            <td th:text="${#numbers.formatDecimal(item.quantity.multiply(item.price), 1, 'COMMA', 2, 'POINT')}">200.00</td>
            <td th:text="${item.comments}">Оплата за послугу</td>
        </tr>
        </tbody>
        <tfoot>
        <tr>
            <th colspan="5" class="text-end">Разом:</th>
            <th colspan="2"
                th:text="${#numbers.formatDecimal(goodsList.stream().map(g -> g.price.multiply(g.quantity)).reduce(T(java.math.BigDecimal).ZERO, (a,b) -> a.add(b)), 1, 'COMMA', 2, 'POINT')}">
                0.00
            </th>
        </tr>
        </tfoot>
    </table>

    <div class="mt-5">
        <p><strong>Підпис відповідальної особи:</strong></p>
        <p>___________________________</p>
    </div>
</div>

</body>
</html>


<!--model.addAttribute("invoiceDate", LocalDate.now());-->
<!--model.addAttribute("invoiceNumber", "INV-2025-001");-->
<!--model.addAttribute("clientName", "ТОВ \"Клієнт\"");-->
<!--model.addAttribute("goodsList", listOfGoods); // List<AccGoodsReference>-->