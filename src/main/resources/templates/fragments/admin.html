<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Admin Fragments</title>
</head>
<body>

<div th:fragment="searchuser">
    <div class="row">
        <div class="col" th:style="'background-color: rgb(230,230, 230'">
            <form th:action="@{'/admin/users'}" th:object="${ss}" method="post">
<!--            <form th:action="@{'/admin/searchuser'}"  th:object="${clientsearch}" method="post">-->
                <div class="form-group row">
                    <label for="searchString" class="col-4 col-form-label">Будь що, що міститься в полях користувача</label>
                    <div class="col-8">
                        <input th:field="*{searchString}" type="text" class="form-control">
<!--                        <input th:field="${searchString}" th:name="${searchString}" th:value="${searchString}" th:id="searchString" type="text" class="form-control">-->
                    </div>
                </div>
                <div class="form-group row">
                    <div class="offset-4 col-8">
                        <button name="submit" type="submit" class="badge rounded-pill bg-primary">Шукати</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>

<div th:fragment="listpostcontrol">
    <table class="table">
        <thead>
        <tr>
            <th scope="col">Заголовок</th>
            <th scope="col">Автор</th>
            <th scope="col">Статус</th>
            <th scope="col">Створено</th>
            <th scope="col">Опубліковано</th>
<!--            <th scope="col">Дії</th>-->
        </tr>
        </thead>
        <tbody>
        <a class="btn btn-primary" th:href="@{'/creater/editpost/'+${0}}">Створити пост</a>
        <tr th:each="post : ${posts}">
            <td><span th:text="${post.posttitle}"></span><br>
                <a class="btn btn-primary" th:href="@{'/admin/publishpost/'+${post.id} }">Опублікувати</a>
                <a class="btn btn-primary" th:href="@{'/creater/editpost/'+${post.id} }">Редагувати</a>
                <a class="btn btn-primary" th:href="@{'/admin/rejectpost/'+${post.id} }">Відхилити</a>
                <a class="btn btn-primary" th:href="@{'/admin/delpost/'+${post.id} }">Видалити</a>
            </td>
            <td><span th:text="${post.clientdetail.custname}+' '+${post.clientdetail.custsurname}">Автор</span></td>
            <td><span  th:text="${post.postStatus.label}" >Статус</span></td>
            <td><span  th:text="${#dates.format(post.createdate, 'dd-MM-yyyy HH:mm')}" >Створено</span></td>
            <td><span  th:text="${#dates.format(post.publishdate, 'dd-MM-yyyy HH:mm')}" >Опубліковано</span></td>
        </tr>
        </tbody>
    </table>
</div>

<div th:fragment="listusercontrol">
<!-- Додаємо форму пошуку користувача-->
<!--        <a class="btn btn-primary" th:href="@{'/creater/editpost/'+${0}}">Новий</a>-->
    <div th:each="user, iStat : ${usersList}" >
        <div th:style="${iStat.odd}? 'background-color: rgb(240,240, 240'">
            <div class="row">
<!--            <div th:style="${iStat.odd}? 'background-color: rgb(240,240, 240'">-->
                <span  style="padding-top: 5px" th:utext="'ID='+${user.id}+' Імʼя: '+${user.clientdetail.custname}+' '+${user.clientdetail.custsurname}+' Пошта: '+${user.email}
                        +'<br> Офіційна назва: '+${user.clientdetail.firmname}"/>
                <br>
                <span th:utext="' Створення:'+${#dates.format(user.clientdetail.createdate, 'dd-MM-yyyy')}
                        +' Погодження:'+${#dates.format(user.clientdetail.confirmDate, 'dd-MM-yyyy')}
                        +' UUID:'+${user.clientdetail.uuid}"/>
                <br>
                <!--            <span class="badge rounded-pill bg-primary">Редагувати</span>-->
                <a th:href="@{'/admin/enableuser/'+${user.id} }">
                        <span class="badge rounded-pill bg-primary">Дозволити</span>
                </a>
                <a th:href="@{'/admin/rejectuser/'+${user.id} }">
                        <span class="badge rounded-pill bg-primary">Відхилити</span>
                </a>
                <a th:href="@{'/admin/apruveinfouser/'+${user.id} }">
                        <span class="badge rounded-pill bg-primary">Підтвердити інформацію</span>
                </a>
                <a th:href="@{'/admin/lockuser/'+${user.id} }">
                        <span class="badge rounded-pill bg-primary">Блокувати</span>
                </a>
                <a th:href="@{'/admin/userdel/'+${user.id} }">
                        <span class="badge rounded-pill bg-primary">Видалити</span>
                </a>
            </div> <!-- end Head row -->

            <!-- id="accordionExample" Виникають проблеми з однаковим - відкриваються всі :( -->
            <div class="accordion" id="accordionExample">
                <div class="accordion-item">
                    <h2 class="accordion-header" id="headingOne">
                        <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#documentslist" aria-expanded="true" aria-controls="documentslist">
                            Документи
                        </button>
                    </h2>
                    <div id="documentslist" class="accordion-collapse collapse " aria-labelledby="headingOne" data-bs-parent="#accordionExample">
<!--                    <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne" data-bs-parent="#accordionExample">-->
                        <div class="accordion-body">
                            <div th:each="doc, iStat : ${user.clientdetail.documentslist}" >
                                <!-- Перелік документів-->
                                <span th:text="${doc.status}"/><span thtext="${doc.documenttype.label}"/>
                                <br>
                                <input class="form-control" id="userComment" name="userComment" th:value="${doc.userComment}" type="text" disabled/>
                                <br>
                                <input class="form-control" th:value="${doc.adminComment}" type="text" disabled/>
                                <a th:href="@{'/admin/enableuser/'+${user.id} }">
                                    <span class="badge rounded-pill bg-primary">Подивитися</span>
                                </a>
                            </div>
                        </div>
                    </div>
                </div> <!-- document -->
                <div class="accordion-item">
                    <h2 class="accordion-header" id="headingTwo">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#clientaddressList" aria-expanded="false" aria-controls="clientaddressList">
                            Адреси
                        </button>
                    </h2>
                    <div id="clientaddressList" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#accordionExample">
                        <div class="accordion-body">
                            Перелік адрес
                            <div th:each="doc, iStat : ${user.clientdetail.clientaddressList}" >

                            </div>

                        </div>
                    </div>
                </div> <!--  clientaddressList  -->
                <div class="accordion-item"> <!-- contractList  -->
                    <h2 class="accordion-header" id="headingThree">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#contractList" aria-expanded="false" aria-controls="contractList">
                            Контракти
                        </button>
                    </h2>
                    <div id="contractList" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#accordionExample">
                        <div class="accordion-body">
                            Перелік Контрактів
                            <div th:each="doc, iStat : ${user.clientdetail.contractList}" >
                            </div>
                        </div>
                    </div>
                </div> <!-- contractList  -->
                <div class="accordion-item"> <!-- stationList row -->
                    <h2 class="accordion-header" id="headingThree">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#stationList" aria-expanded="false" aria-controls="stationList">
                            Станции
                        </button>
                    </h2>
                    <div id="stationList" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#accordionExample">
                        <div class="accordion-body">
                            Перелік Станции
                            <div th:each="doc, iStat : ${user.clientdetail.contractList}" >
                            </div>
                        </div>
                    </div>
                </div> <!-- stationList row -->
                <div class="accordion-item"> <!-- albumList row -->
                    <h2 class="accordion-header" id="headingThree">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#albumList" aria-expanded="false" aria-controls="albumList">
                            Альбоми
                        </button>
                    </h2>
                    <div id="albumList" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#accordionExample">
                        <div class="accordion-body">
                            Перелік Альбоми
                            <div th:each="doc, iStat : ${user.clientdetail.albumList}" >
                            </div>
                        </div>
                    </div>
                </div> <!-- albumList row -->
                <div class="accordion-item"> <!-- trackList row -->
                    <h2 class="accordion-header" id="headingThree">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#trackList" aria-expanded="false" aria-controls="trackList">
                            Треки
                        </button>
                    </h2>
                    <div id="trackList" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#accordionExample">
                        <div class="accordion-body">
                            Перелік Треки
                            <div th:each="doc, iStat : ${user.clientdetail.trackList}" >
                            </div>
                        </div>
                    </div>
                </div> <!-- trackList row -->
            </div>



<!--            <div class="row"> &lt;!&ndash; document row &ndash;&gt;-->
<!--               <h5>Документи:</h5>-->
<!--                <div th:each="doc, iStat : ${user.clientdetail.documentslist}" >-->
<!--                &lt;!&ndash; Перелік документів&ndash;&gt;-->
<!--                    <span th:text="${doc.status}"/><span thtext="${doc.documenttype.label}"/>-->
<!--                    <br>-->
<!--                    <input class="form-control" id="userComment" name="userComment" th:value="${doc.userComment}" type="text" disabled/>-->
<!--                    <br>-->
<!--                    <input class="form-control" th:value="${doc.adminComment}" type="text" disabled/>-->
<!--                    <a th:href="@{'/admin/enableuser/'+${user.id} }">-->
<!--                        <span class="badge rounded-pill bg-primary">Подивитися</span>-->
<!--                    </a>-->
<!--                </div>-->
<!--            </div> &lt;!&ndash; end document row &ndash;&gt;-->
<!--            <div class="row"> &lt;!&ndash; clientaddressList row &ndash;&gt;-->
<!--                <h5>Адреси:</h5>-->
<!--                <div th:each="doc, iStat : ${user.clientdetail.clientaddressList}" >-->
<!--                    &lt;!&ndash; Перелік документів&ndash;&gt;-->
<!--                </div>-->
<!--            </div> &lt;!&ndash; end clientaddressList row &ndash;&gt;-->
<!--            <div class="row"> &lt;!&ndash; contractList row &ndash;&gt;-->
<!--                <h5>Контракти:</h5>-->
<!--                <div th:each="doc, iStat : ${user.clientdetail.contractList}" >-->

<!--                    &lt;!&ndash; Перелік документів&ndash;&gt;-->
<!--                </div>-->
<!--            </div> &lt;!&ndash; end contractList row &ndash;&gt;-->
<!--            <div class="row"> &lt;!&ndash; stationList row &ndash;&gt;-->
<!--                <h5>Станции:</h5>-->
<!--                <div th:each="doc, iStat : ${user.clientdetail.stationList}" >-->
<!--                    &lt;!&ndash; Перелік stationList&ndash;&gt;-->
<!--                </div>-->
<!--            </div> &lt;!&ndash; end stationList row &ndash;&gt;-->
<!--            <div class="row"> &lt;!&ndash; albumList row &ndash;&gt;-->
<!--                <h5>Альбоми:</h5>-->
<!--                <div th:each="doc, iStat : ${user.clientdetail.albumList}" >-->
<!--                    &lt;!&ndash; Перелік документів&ndash;&gt;-->
<!--                </div>-->
<!--            </div> &lt;!&ndash; end albumList row &ndash;&gt;-->
<!--            <div class="row"> &lt;!&ndash; trackList row &ndash;&gt;-->
<!--                <h5>Треки:</h5>-->
<!--                <div th:each="doc, iStat : ${user.clientdetail.trackList}" >-->
<!--                    &lt;!&ndash; Перелік документів&ndash;&gt;-->
<!--                </div>-->
<!--            </div> &lt;!&ndash; end document row &ndash;&gt;-->
        </div>
    </div>
</div>

<div th:fragment="listuserdocuments">

    <a class="btn btn-primary" th:href="@{'/creater/editpost/'+${0}}">Новий</a>
    <div th:each="cd : ${clientdetailList}">
            <b>
                <span th:text="${cd.custname}+' '+${cd.custsurname}+' | '+${cd.user.email}"/>
                <span th:utext="${cd.firmname != null} ? '<br>'+${cd.firmname}"/>
            </b>
        <div style="padding-left:3rem;" th:each="document : ${cd.documentslist}">
            <a th:href="'/admin/documentedit/'+${document.id}">
                <span th:text="' Створення: '+${#dates.format(document.loaddate, 'dd-MM-yyyy')} + ' Статус: '+${document.status.label}"/>
            </a>
<!--            <br>-->
<!--            <a class="btn btn-primary padding_button" th:href="@{'/admin/enableuser/'+${cd.user.id} }">Дозволити</a>-->
<!--            <a class="btn btn-primary padding_button" th:href="@{'/admin/rejectuser/'+${cd.user.id} }">Відхилити</a>-->
<!--            <a class="btn btn-primary padding_button" th:href="@{'/admin/apruveinfouser/'+${cd.user.id} }">Підтвердити інформацію</a>-->
<!--            <a class="btn btn-primary padding_button" th:href="@{'/admin/lockuser/'+${cd.user.id} }">Блокувати</a>-->
        </div>

    </div>

</div>

<div th:fragment="editdocument">
    <form class="mx-1 mx-md-4" method="post" th:action="@{/admin/documentedit}" th:object="${document}">
        <input name="id" th:value="*{id}" type="hidden"/>
        <!--        <div class="dz-message needsclick">-->
        <!--        <th:block th:switch="${document.status}">-->
        <span class="form-label">Статус:
            <select th:field="*{status}" class="form-control">
                <option th:each="linetype : ${options}"  th:value="${linetype}" th:text="${linetype.label}" >Wireframe</option>
            </select>
        </span>
        <br>

        <input class="form-control"  th:field="${document.documenttype}"
               type="text"/>
        <label class="form-label" for="documenttype">Вкажіть тип документу  (паспорт, свідотство, угода тощо)</label>

        <input class="form-control" id="userComment" name="userComment" th:value="${document.userComment}" type="text"/>
        <label class="form-label" for="userComment">Коментар користувача до документу</label>

        <input class="form-control" th:field="*{adminComment}" type="text" />
        <label class="form-label" for="adminComment">Коментар служби підтримки до документу</label>

        <div class="d-flex justify-content-center mx-4 mb-3 mb-lg-4">
            <button class="btn btn-primary btn-lg" type="submit">Записати зміни</button>
        </div>

    </form>
</div>

<div th:fragment="listuseraddresses">
    <div th:each="cd : ${clientdetailList}">
           <b>
                <span th:text="${cd.custname}+' '+${cd.custsurname}+' | '+${cd.user.email}"/>
                <span th:utext="${cd.firmname != null} ? '<br>'+${cd.firmname}"/>
           </b>
           <div style="padding-left:3rem;" th:each="adr : ${cd.clientaddressList}">
               <a th:href="'/admin/invertaddressapruve/'+${adr.id}">
<!--                    <span th:text="${adr.apruve != true}' Статус: '+${adr.apruve}"/><br>-->
                    <span th:text="' вул: '+${adr.street} + ' буд: '+${adr.buildnumber} + ' корп: '+${adr.korpus}+ ' кв/оф: '+${adr.appartment}"/><br>
                    <span th:text="' місто: '+${adr.cityname} + ' обл: '+${adr.region} + ' р-н: '+${adr.area}"/><br>
                    <span th:text="' країна: '+${adr.country} + ' інд: '+${adr.zip} + ' тел: '+${adr.phone}"/><br>
               </a>
               <a class="btn btn-primary padding_button" th:href="@{'/admin/editaddress/'+${adr.id} }">Редагувати</a>
               <a class="btn btn-primary padding_button" th:href="@{'/admin/invertaddressapruve/'+${adr.id} }">Схвалити</a>
           </div>
    </div>

</div>

</body>
</html>